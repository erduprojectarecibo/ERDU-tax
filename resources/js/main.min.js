document.addEventListener("DOMContentLoaded",()=>{M.Modal.init(document.getElementById("modal"),{onCloseEnd:()=>{document.getElementById("table-body").innerHTML="",document.getElementById("calculate_btn").disabled=!1}}),document.getElementById("close-modal").addEventListener("click",()=>{let modal;M.Modal.getInstance(document.getElementById("modal")).close()});class Contribution{constructor(title,input,bracketArr,percentArr,amountArr){this.title=title,this.input=input,this.brackets=bracketArr,this.percentages=percentArr,this.amounts=amountArr,this.brackets.push(1/0),(title.includes("USA")||title.includes("US"))&&(this.brackets.unshift(0),this.percentages.unshift(0),this.amounts.unshift(0))}get tax(){for(let i=0;i<this.brackets.length;i++)if(this.input<=this.brackets[i])return this.amounts[i]+this.percentages[i]*(this.input-this.brackets[0==i?i:i-1])}get effectiveRate(){return this.tax/this.input*100}}function addRow(obj){let table=document.getElementById("result_table").getElementsByTagName("tbody")[0],row=table.insertRow(table.rows.length),cell=row.insertCell(0),text=document.createTextNode(obj.title);function currencyFormat(num){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(num)}cell.appendChild(text),cell=row.insertCell(1),text=document.createTextNode(currencyFormat(obj.input)),cell.appendChild(text),cell=row.insertCell(2),text=document.createTextNode(currencyFormat(obj.tax)),cell.appendChild(text),cell=row.insertCell(3),text=document.createTextNode(obj.effectiveRate.toFixed(1)+"%"),cell.appendChild(text)}var inputEl=document.getElementById("ingreso_neto");function error(msg){inputEl.classList.add("invalid"),M.toast({html:msg,displayLength:4e3})}document.getElementById("tax-form").addEventListener("submit",()=>{event.preventDefault(),inputEl.classList.remove("invalid");var insc=inputEl.value;if(""==insc)return void error("Input required");if(insc<=0)return void error("Input must be greater than 0");document.getElementById("calculate_btn").disabled=!0;let progressBar=document.getElementById("progress-bar");progressBar.classList.remove("hide");let title="PR Tax 2017",brackets=[9e3,25e3,41500,61500],percentages=[0,.07,.14,.25,.33],amounts=[0,0,1120,3430,8430],PR17=new Contribution(title,insc,brackets,percentages,amounts),PR18=new Contribution(title="PR Proposed Tax Reform 2018",insc,brackets=[12500,21e3,45e3,58e3],percentages=[0,.009,.09,.19,.31],amounts=[0,0,76,2236,4706]),US17=new Contribution(title="USA Tax 2017",insc,brackets=[9325,37950,91900,191650,416700,418400],percentages=[.1,.15,.25,.28,.33,.35,.396],amounts=[0,932.5,5226.25,18713.75,46643.75,120910.25,121505.25]),US18=new Contribution(title="USA Tax Reform 2018",insc,brackets=[9525,38700,82500,157500,2e5,5e5],percentages=[.1,.12,.22,.24,.32,.35,.37],amounts=[0,952.5,4453.5,14089.5,32089.5,45689.5,150689.5]);addRow(PR17),addRow(PR18),addRow(US17),addRow(US18),setTimeout(()=>{let modal;progressBar.classList.add("hide"),M.Modal.getInstance(document.getElementById("modal")).open()},2e3)})});